<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Fetch ,async and await</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
  <h1 align="center">Fetch ,async and await</h1>
  <h3><mark>Press F12 to see output in console.</mark></h3>
  <script>
	let users=[];
	async function fetchData(){
	  const response = await fetch('https://jsonplaceholder.typicode.com/todos');
    	  const data = await response.json();
    	  users = data;
    	  console.log("Fetch data : ",data);
	}

	fetchData();
	async function createUsers(user){
	  return new Promise((resolve,reject)=>{
	    setTimeout(()=>{
	      users.push(user);
	      const error =false;
	      if(error){
		reject("Error occured");
	      }
	      else{
	        resolve();
	      }
	    },3000);	    
	  })
		
	}
	
	function getUsers(){
    	  setTimeout(()=>{
            let result = [];
            users.forEach(user=>{
              if(user.completed){
                result.push(user);
              }
            });
            console.log("Completed",result);
          },1000);
	}
	createUsers("pravin").then(getUsers).catch(error=>console.log(error));
        
  </script> 
</body>
</html>

